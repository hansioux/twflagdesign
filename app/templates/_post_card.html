<div class="card"
    style="padding: 1.5rem; {% if post.post_type == 'announcement' %} border-left: 4px solid var(--color-accent); {% endif %}">
    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
        <span
            style="font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.05em; color: {{ 'var(--color-accent)' if post.post_type == 'announcement' else 'var(--color-text-muted)' }}; font-weight: 700;">
            {{ post.subject or 'General' }}
            {% if post.post_type == 'announcement' %} &bull; Announcement {% endif %}
        </span>
        <span style="font-size: 0.8rem; color: var(--color-text-muted);">{{
            post.created_at.strftime('%Y-%m-%d') }}</span>
    </div>

    <h2 style="font-family: var(--font-heading); font-size: 1.5rem; margin-bottom: 0.75rem;">{{
        post.title }}</h2>
    <p style="color: var(--color-text-main); margin-bottom: 1rem; line-height: 1.6; white-space: pre-wrap;">{{
        post.content | truncate(200) }}</p>

    {% if post.image_filename %}
    <div style="margin-bottom: 1rem;">
        <img src="{{ url_for('static', filename='uploads/' + post.image_filename) }}"
            style="max-height: 200px; border-radius: 4px;">
    </div>
    {% endif %}

    <div style="display: flex; justify-content: space-between; align-items: center;">
        <a href="{{ url_for('main.post_detail', post_id=post.id) }}"
            style="color: var(--color-primary); font-weight: 600; text-decoration: none;">
            Read More &rarr;
        </a>
        <span style="font-size: 0.875rem; color: var(--color-text-muted);">
            By {{ post.author.name }} &bull; {{ post.comments|length }} comments
        </span>
    </div>
</div>